From bb6aa4636c23e2e0625a3918ea14995f30aebf01 Mon Sep 17 00:00:00 2001
From: Yaowei Zhou <yaowei.zhou@intel.com>
Date: Thu, 02 Feb 2023 14:28:54 +0800
Subject: [PATCH] Enable linux:unstable_deb build target when using the chromium minigbm

Bug:N/A
Change-Id: Ied6a2d4a8aace6db581d97819e4ce7a346ebd93f
---

diff --git a/third_party/minigbm/BUILD.gn b/third_party/minigbm/BUILD.gn
index 739e278..50bf5d8 100644
--- a/third_party/minigbm/BUILD.gn
+++ b/third_party/minigbm/BUILD.gn
@@ -58,7 +58,7 @@
     }
   }
 
-  shared_library("minigbm") {
+  static_library("minigbm") {
     sources = [
       "src/amdgpu.c",
       "src/dri.c",
@@ -89,8 +89,8 @@
     }
 
     # Clients need this to pick up the shared library correctly.
-    all_dependent_configs =
-        [ "//build/config/gcc:rpath_for_built_shared_libraries" ]
+    #all_dependent_configs =
+    #    [ "//build/config/gcc:rpath_for_built_shared_libraries" ]
   }
 
   # This target is used for Chromecast build, which expects the resulting lib
